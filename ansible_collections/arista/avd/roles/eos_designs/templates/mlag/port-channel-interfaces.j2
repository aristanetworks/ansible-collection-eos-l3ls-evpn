{# Leaf mlag peer-link #}
port_channel_interfaces:
  Port-Channel{{ switch.mlag_port_channel_id }}:
    description: "{% include switch.interface_descriptions.mlag_port_channel_interfaces %}"
    type: switched
    shutdown: false
    vlans: {{ switch.mlag_peer_link_allowed_vlans }}
    mode: trunk
{% if p2p_uplinks_qos_profile is arista.avd.defined %}
    service_profile: {{ p2p_uplinks_qos_profile }}
{% endif %}
    trunk_groups:
{% if switch.mlag_l3 is arista.avd.defined %}
{#     Add LEAF_PEER_L3 even if we reuse the MLAG trunk group for underlay peering #}
{#     since this trunk group is also used for overlay iBGP peerings #}
      - {{ switch.trunk_groups.mlag_l3.name }}
{% endif %}
      - {{ switch.trunk_groups.mlag.name }}
{% if switch.mlag_port_channel_structured_config is arista.avd.defined %}
    struct_cfg: {{ switch.mlag_port_channel_structured_config }}
{% endif %}

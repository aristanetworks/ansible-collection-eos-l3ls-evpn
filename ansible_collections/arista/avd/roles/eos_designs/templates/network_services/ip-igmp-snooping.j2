{# tenant IGMP snooping #}
ip_igmp_snooping:
  globally_enabled: {{ switch.igmp_snooping_enabled }}
{% if switch.igmp_snooping_enabled is arista.avd.defined(true) %}
  vlans:
{# ---------------------------- #}
{# SVI & L3VLANs services       #}
{# ---------------------------- #}
{%     for tenant in network_services_data.tenants %}
{%         for vrf in tenant.vrfs %}
{# Tenant VLANs w/SVIs #}
{%             for svi in vrf.svis %}
{%                 if svi.igmp_snooping_enabled is arista.avd.defined %}
    {{ svi.id | int }}:
      enabled: {{ svi.igmp_snooping_enabled }}
{%                 endif %}
{%             endfor %}
{%         endfor %}
{# ---------------------------- #}
{# L2VLANs services             #}
{# ---------------------------- #}
{%         for l2vlan in tenant.l2vlans %}
{%             if l2vlan.igmp_snooping_enabled is arista.avd.defined %}
    {{ l2vlan.id | int }}:
      enabled: {{ l2vlan.igmp_snooping_enabled }}
{%             endif %}
{%         endfor %}
{%     endfor %}
{% endif %}

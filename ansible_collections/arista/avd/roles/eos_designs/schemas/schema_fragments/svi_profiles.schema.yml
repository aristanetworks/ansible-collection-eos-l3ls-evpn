# yaml-language-server: $schema=../../../../plugins/plugin_utils/schema/avd_meta_schema.json
# Line above is used by RedHat's YAML Schema vscode extension
# Use Ctrl + Space to get suggestions for every field. Autocomplete will pop up after typing 2 letters.
type: dict
keys:
  svi_profiles:
    type: list
    primary_key: profile
    convert_types:
      - dict
    description: |
      Optional profiles to apply on SVI interfaces
      Each profile can support all or some of the following keys according to your own needs.
      Keys are the same used under SVI.
      Svi_profiles can refer to another svi_profiles to inherit settings in up to two levels (svi->profile->parent_profile).
    items:
      type: dict
      keys:
        profile:
          type: str
          description: Profile name
        parent_profile:
          type: str
          description: SVI profile name
        name:
          type: str
          description: VLAN name
        mtu:
          type: int
          convert_types:
            - str
        enabled:
          type: bool
        ip_virtual_router_addresses:
          type: list
          items:
            type: str
            description: IPv4_address/Mask or IPv4_address
        ip_address_virtual:
          type: str
          description: IPv4_address/Mask
        ip_address_virtual_secondaries:
          type: list
          items:
            type: str
            description: IPv4_address/Mask
        igmp_snooping_enabled:
          type: bool
          default: true
        ip_helpers:
          type: list
          items:
            type: dict
            keys:
              ip_helper:
                type: str
                description: IPv4 DHCP server IP
              source_interface:
                type: str
                description: Interface name
              source_vrf:
                type: str
                description: VRF to originate DHCP relay packets to DHCP server
        nodes:
          type: list
          primary_key: name
          convert_types:
            - dict
          items:
            type: dict
            keys:
              name:
                type: str
              ip_address:
                type: str
              ipv6_address:
                type: str
              ip_address_virtual_secondaries:
                type: list
                description: Should take config from svis[svi].nodes[node]
                items:
                  type: str
              ip_virtual_router_addresses:
                type: list
                items:
                  type: str
              ipv6_virtual_router_addresses:
                type: list
                items:
                  type: str
              ip_helpers:
                type: list
                items:
                  type: dict
                  keys:
                    ip_helper:
                      type: str
                      description: IPv4 DHCP server IP
                    source_interface:
                      type: str
                      description: Interface name
                    source_vrf:
                      type: str
                      description: VRF to originate DHCP relay packets to DHCP server

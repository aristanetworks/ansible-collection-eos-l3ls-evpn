{% if qos_profiles is arista.avd.defined %}

## QOS Profiles

### QOS Profiles Summary

{%     for profile in qos_profiles | arista.avd.natural_sort %}

QOS Profile: **{{ profile }}**

**Settings**

| Default COS | Default DSCP | Trust | Shape Rate | QOS Service Policy |
| ----------- | ------------ | ----- | ---------- | ------------------ |
{%         set cos = qos_profiles[profile].cos | arista.avd.default('-') %}
{%         set dscp = qos_profiles[profile].dscp | arista.avd.default('-') %}
{%         set trust = qos_profiles[profile].trust | arista.avd.default('-') %}
{%         set shape_rate = qos_profiles[profile].shape.rate | arista.avd.default('-') %}
{%         set qos_sp = qos_profiles[profile].service_policy.type.qos_input | arista.avd.default('-') %}
| {{ cos }} | {{ dscp }} | {{ trust }} | {{ shape_rate }} | {{ qos_sp }} |
{%         if qos_profiles[profile].tx_queues is arista.avd.defined or
              qos_profiles[profile].uc_tx_queues is arista.avd.defined or
              qos_profiles[profile].mc_tx_queues is arista.avd.defined %}

**TX Queues**

| TX queue | Type | Bandwidth | Priority | Shape Rate |
| -------- | ---- | --------- | -------- | ---------- |
{%             if qos_profiles[profile].tx_queues is arista.avd.defined %}
{%                 for tx_queue in qos_profiles[profile].tx_queues | arista.avd.natural_sort %}
{%                     set type = "All" %}
{%                     set bw_percent = qos_profiles[profile].tx_queues[tx_queue].bandwidth_percent | arista.avd.default(
                                        qos_profiles[profile].tx_queues[tx_queue].bandwidth_guaranteed_percent,
                                    '-') %}
{%                     set priority = qos_profiles[profile].tx_queues[tx_queue].priority | arista.avd.default('-') %}
{%                     set shape_rate = qos_profiles[profile].tx_queues[tx_queue].shape.rate | arista.avd.default('-') %}
| {{ tx_queue }} | {{ type }} | {{ bw_percent }} | {{ priority }} | {{ shape_rate }} |
{%                 endfor %}
{%             endif %}
{%             if qos_profiles[profile].uc_tx_queues is arista.avd.defined %}
{%                 for uc_tx_queue in qos_profiles[profile].uc_tx_queues | arista.avd.natural_sort %}
{%                     set type = "Unicast" %}
{%                     set bw_percent = qos_profiles[profile].uc_tx_queues[uc_tx_queue].bandwidth_percent | arista.avd.default(
                                        qos_profiles[profile].uc_tx_queues[uc_tx_queue].bandwidth_guaranteed_percent,
                                        '-') %}
{%                     set priority = qos_profiles[profile].uc_tx_queues[uc_tx_queue].priority | arista.avd.default('-') %}
{%                     set shape_rate = qos_profiles[profile].uc_tx_queues[uc_tx_queue].shape.rate | arista.avd.default('-') %}
| {{ uc_tx_queue }} | {{ type }} | {{ bw_percent }} | {{ priority }} | {{ shape_rate }} |
{%                 endfor %}
{%             endif %}
{%             if qos_profiles[profile].mc_tx_queues is arista.avd.defined %}
{%                 for mc_tx_queue in qos_profiles[profile].mc_tx_queues | arista.avd.natural_sort %}
{%                     set type = "Multicast" %}
{%                     set bw_percent = qos_profiles[profile].mc_tx_queues[mc_tx_queue].bandwidth_percent | arista.avd.default(
                                        qos_profiles[profile].mc_tx_queues[mc_tx_queue].bandwidth_guaranteed_percent,
                                        '-') %}
{%                     set priority = qos_profiles[profile].mc_tx_queues[mc_tx_queue].priority | arista.avd.default('-') %}
{%                     set shape_rate = qos_profiles[profile].mc_tx_queues[mc_tx_queue].shape.rate | arista.avd.default('-') %}
| {{ mc_tx_queue }} | {{ type }} | {{ bw_percent }} | {{ priority }} | {{ shape_rate }} |
{%                 endfor %}
{%             endif %}
{%         endif %}
{%     endfor %}

### QOS Profile Device Configuration

```eos
{%     include 'eos/qos-profiles.j2' %}
```
{% endif %}

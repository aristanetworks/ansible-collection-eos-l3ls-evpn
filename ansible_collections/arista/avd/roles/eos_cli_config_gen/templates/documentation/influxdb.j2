{#
 Copyright (c) 2023-2024 Arista Networks, Inc.
 Use of this source code is governed by the Apache License 2.0
 that can be found in the LICENSE file.
#}
{# doc - influxdb #}
{% if influxdb is arista.avd.defined %}

## InfluxDB Telemetry

### InfluxDB Telemetry Summary
{%     if influxdb.source_group_standard_disabled is arista.avd.defined(true) %}

Source Group Standard Disabled : {{ influxdb.source_group_standard_disabled }}
{%     endif %}
{%     if influxdb.destinations is arista.avd.defined %}

#### InfluxDB Telemetry Destinations

| Destination | Database | URL | VRF | Username |
| ----------- | -------- | --- | --- | -------- |
{%         for destination in influxdb.destinations | arista.avd.natural_sort('name') %}
| {{ destination.name | arista.avd.default('-') }} | {{ destination.database | arista.avd.default('-') }} | {{ destination.url | arista.avd.default('-') }} | {{ influxdb.vrf | arista.avd.default('-') }} | {{ destination.username | arista.avd.default('-') }} |
{%         endfor %}
{%     endif %}
{%     if influxdb.source_sockets is arista.avd.defined %}

#### InfluxDB Telemetry Sources

| Source Name | URL | Connection Limit |
| ----------- | --- | ---------------- |
{%         for source in influxdb.source_sockets | arista.avd.natural_sort('name') %}
| {{ source.name | arista.avd.default('-') }} | {{ source.url | arista.avd.default('-') }} | {{ source.connection_limit | arista.avd.default('-') }} |
{%         endfor %}
{%     endif %}
{%     if influxdb.tags is arista.avd.defined %}

#### InfluxDB Telemetry Tags

| Tag | Value |
| --- | ----- |
{%         for tag in influxdb.tags %}
| {{ tag.name | arista.avd.default('-') }} | {{ tag.value | arista.avd.default('-') }} |
{%         endfor %}
{%     endif %}

### InfluxDB Telemetry Device Configuration

```eos
{%     include 'eos/influxdb.j2' %}
```
{% endif %}

{#
 Copyright (c) 2023 Arista Networks, Inc.
 Use of this source code is governed by the Apache License 2.0
 that can be found in the LICENSE file.
#}
{# doc - stun #}
{% if stun is arista.avd.defined %}

## STUN
{%     if stun.client is arista.avd.defined %}

### STUN Client
{%         if stun.client.server_profiles is arista.avd.defined %}

#### Server Profiles

| Server Profile | IP address | SSL Profile |
| -------------- | ---------- | ----------- |
{%             for server_profile in stun.client.server_profiles | arista.avd.natural_sort('name') %}
| {{ server_profile.name }} | {{ server_profile.ip_address }} | {{ server_profile.ssl_profile | arista.avd.default("-") }} |
{%             endfor %}
{%         endif %}
{%     endif %}
{%     if stun.server is arista.avd.defined %}

### STUN Server

| Server local interfaces |
| ----------------------- |
{%         for local_interface in stun.server.local_interfaces | arista.avd.natural_sort %}
| {{ local_interface }} |
{%         endfor %}
{# next is deprecated remove in v5.0.0 #}
{%         if stun.server.local_interface is arista.avd.defined %}
| {{ stun.server.local_interface }} |
{%         endif %}

| Bindings Timeout (s) | SSL Profile | SSL Connection Lifetime |
| -------------------- | ----------- | ----------------------- |
{%         set bindings_timeout = stun.server.bindings_timeout | arista.avd.default("-") %}
{%         set ssl_profile = stun.server.ssl_profile | arista.avd.default("-") %}
{%         if stun.server.ssl_connection_lifetime.minutes is arista.avd.defined %}
{%             set lifetime = stun.server.ssl_connection_lifetime.minutes ~ " minutes" %}
{%         elif stun.server.ssl_connection_lifetime.hours is arista.avd.defined %}
{%             set lifetime = stun.server.ssl_connection_lifetime.hours ~ " hours" %}
{%         else %}
{%             set lifetime = "-" %}
{%         endif %}
| {{ bindings_timeout }} | {{ ssl_profile }} | {{ lifetime }} |
{%     endif %}

### STUN Device Configuration

```eos
{%     include 'eos/stun.j2' %}
```
{% endif %}

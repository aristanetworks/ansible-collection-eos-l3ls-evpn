{# eos - interface ip nat #}
{% for nat in interface_ip_nat.source.dynamic | arista.avd.default([]) | arista.avd.natural_sort('access_list') %}
{%     set valid = false %}
{%     set nat_cli = 'ip nat source dynamic access-list ' ~ nat.access_list %}
{%     if nat.nat_type == 'overload' %}
{%         set nat_cli = nat_cli ~ ' overload' %}
{%         set valid = true %}
{%     elif nat.pool_name is arista.avd.defined %}
{%         set nat_cli = nat_cli ~ ' pool ' ~ nat.pool_name %}
{%         set valid = true %}
{%         if nat.nat_type == 'pool-address-only' %}
{%             set nat_cli = nat_cli ~ ' address-only' %}
{%         elif nat.nat_type == 'pool-full-cone' %}
{%             set nat_cli = nat_cli ~ ' full-cone' %}
{%         endif %}
{%     endif %}
{%     if valid %}
{%         if nat.priority | arista.avd.default(0) > 0 %}
{%             set nat_cli = nat_cli ~ ' priority ' ~ nat.priority %}
{%         endif %}
{%         if nat.comment is arista.avd.defined %}
{%             set nat_cli = nat_cli ~ ' comment ' ~ nat.comment %}
{%         endif %}
   {{ nat_cli }}
{%     endif %}
{% endfor %}
{% for nat in interface_ip_nat.destination.dynamic | arista.avd.default([]) | arista.avd.natural_sort('access_list') %}
{%     set nat_cli = 'ip nat destination dynamic access-list ' ~ nat.access_list ~ ' pool ' ~ nat.pool_name %}
{%     if nat.priority | arista.avd.default(0) > 0 %}
{%         set nat_cli = nat_cli ~ ' priority ' ~ nat.priority %}
{%     endif %}
{%     if nat.comment is arista.avd.defined %}
{%         set nat_cli = nat_cli ~ ' comment ' ~ nat.comment %}
{%     endif %}
   {{ nat_cli }}
{% endfor %}

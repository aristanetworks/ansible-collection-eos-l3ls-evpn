# yaml-language-server: $schema=../../../../plugins/plugin_utils/schema/avd_meta_schema.json
# Line above is used by RedHat's YAML Schema vscode extension
# Use Ctrl + Space to get suggestions for every field. Autocomplete will pop up after typing 2 letters.
type: dict
keys:
  priority_flow_control:
    type: dict
    description: |
      Global Priority Flow Control settings.
    keys:
      all_off:
        type: bool
        description: |
          Disable PFC on all interfaces.
      watchdog:
        type: dict
        keys:
          action:
            type: str
            valid_values: ["drop", "no-drop"]
            description: |
              Action on stuck queue. Default is 'errdisable'.
              Aceptable values are "drop" or "no-drop".
          timeout:
            type: str
            pattern: "\\d+(\\.\\d)?"
            convert_types:
              - "int"
            description: |
              Timeout after which port should be errdisabled or
              should start dropping on congested priorities.
              This should be decimal with up to 1 decimal point.
              Example : 0.5 or 60
          polling_interval:
            type: str
            pattern: "\\d+(\\.\\d)?"
            convert_types:
              - "int"
            description: |
              Time interval at which the watchdog should poll the queues.
              This should be decimal with up to 1 decimal point or set
              to 'auto' based on recovery_time and timeout values.
              Example : 0.5 or 60
          recovery_time:
            type: str
            pattern: "\\d+(\\.\\d)?"
            convert_types:
              - "int"
            description: |
              Time interval at which the watchdog should poll the queues.
              This should be decimal with up to 1 decimal point or set
              to 'auto' based on recovery_time and timeout values.
              Example : 0.5 or 60
          override_action_drop:
            type: bool
            description: |
              Override configured action on stuck queue to drop.

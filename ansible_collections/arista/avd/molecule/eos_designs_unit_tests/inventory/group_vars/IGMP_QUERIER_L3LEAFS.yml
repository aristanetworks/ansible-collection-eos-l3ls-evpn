type: l3leaf

mgmt_gateway: 192.168.200.5

l3leaf:
  defaults:
    platform: vEOS-LAB
    loopback_ipv4_pool: 192.168.255.0/24
    vtep_loopback_ipv4_pool: 192.168.254.0/24
    virtual_router_mac_address: 00:dc:00:00:00:0a
    mlag_peer_l3_ipv4_pool: 10.255.251.0/24
    mlag_peer_ipv4_pool: 10.255.252.0/24
  nodes:
    IGMP-QUERIER-L3LEAF1A:
      bgp_as: 65101
      id: 1
      mgmt_ip: 192.168.200.101/24

svi_profiles:
  IGMP_QUERIER_PARENT:
    igmp_snooping_querier:
      enabled: true
  IGMP_QUERIER_CHILD_1:
    parent_profile: "IGMP_QUERIER_PARENT"
  IGMP_QUERIER_CHILD_2:
    parent_profile: "IGMP_QUERIER_PARENT"
    igmp_snooping_querier:
      enabled: true
      source_address: 1.1.1.1
      version: 3

tenants:
  Tenant_A:
    mac_vrf_vni_base: 10000
    igmp_snooping_querier:
      enabled: true
    vrfs:
      IGMP_QUERIER_TEST_1:
        description: "IGMP_QUERIER_TEST_1"
        vrf_vni: 11
        svis:
          1:
            name: "VLAN_1"
            tags: ['test_l3']
            enabled: True
            ip_address_virtual: 10.0.1.1/24
          2:
            name: "VLAN_2"
            tags: ['test_l3']
            enabled: True
            ip_address_virtual: 10.0.2.1/24
            igmp_snooping_querier:
              version: 3
          3:
            name: "VLAN_2"
            tags: ['test_l3']
            enabled: True
            ip_address_virtual: 10.0.3.1/24
            igmp_snooping_querier:
              enabled: false
    l2vlans:
      101:
        name: "VLAN_101"
        tags: ['test_l2']
      102:
        name: "VLAN_102"
        tags: ['test_l2']

# Test version and source address
  Tenant_B:
    mac_vrf_vni_base: 20000
    igmp_snooping_querier:
      enabled: true
      source_address: 1.1.1.1
      version: 3
    vrfs:
      IGMP_QUERIER_TEST_2:
        description: "IGMP_QUERIER_TEST_2"
        vrf_vni: 21
        svis:
          11:
            name: "VLAN_11"
            tags: ['test_l3']
            enabled: True
            ip_address_virtual: 10.0.11.1/24
          12:
            name: "VLAN_12"
            tags: ['test_l3']
            enabled: True
            ip_address_virtual: 10.0.12.1/24
    l2vlans:
      111:
        name: "VLAN_111"
        tags: ['test_l2']
      112:
        name: "VLAN_112"
        tags: ['test_l2']

# Test with svi profile
  Tenant_C:
    mac_vrf_vni_base: 20000
    vrfs:
      IGMP_QUERIER_TEST_3:
        description: "IGMP_QUERIER_TEST_3"
        vrf_vni: 21
        svis:
          21:
            name: "VLAN_11"
            tags: ['test_l3']
            enabled: True
            ip_address_virtual: 10.0.21.1/24
            profile: IGMP_QUERIER_CHILD_1
          22:
            name: "VLAN_12"
            tags: ['test_l3']
            enabled: True
            ip_address_virtual: 10.0.22.1/24
            profile: IGMP_QUERIER_CHILD_2

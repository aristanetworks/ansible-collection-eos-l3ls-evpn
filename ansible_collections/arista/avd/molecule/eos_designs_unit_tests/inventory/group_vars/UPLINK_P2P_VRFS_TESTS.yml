---

default_node_types:
  - node_type: spine
    match_hostnames:
      - ".*SPINE.*"
  - node_type: l3leaf
    match_hostnames:
      - ".*LEAF.*"

bgp_as: 65000

l3leaf:
  defaults:
    platform: vEOS-LAB
    loopback_ipv4_pool: 192.168.42.0/24
    vtep_loopback_ipv4_pool: 172.16.0.0/24
    uplink_ipv4_pool: 10.42.42.0/24
    uplink_switches: [ UPLINK_P2P_VRFS_TESTS_SPINE1, UPLINK_P2P_VRFS_TESTS_SPINE2 ]
    uplink_interfaces: [ Ethernet1, Ethernet2 ]
    uplink_structured_config:
      storm_control:
        broadcast:
          level: 25
        unknown_unicast:
          level: 25
    uplink_type: p2p-vrfs
    filter:
      always_include_vrfs_in_tenants: [TenantA]
  nodes:
    - name: UPLINK_P2P_VRFS_TESTS_LEAF1
      id: 3
      uplink_switch_interfaces: [ Ethernet1, Ethernet2 ]

spine:
  defaults:
    platform: vEOS-LAB
    loopback_ipv4_pool: 192.168.42.0/24
  nodes:
    - name: UPLINK_P2P_VRFS_TESTS_SPINE1
      id: 1
    - name: UPLINK_P2P_VRFS_TESTS_SPINE2
      id: 2

tenants:
  - name: TenantA
    vrfs:
      - name: default
        vrf_id: 1
      - name: PROD
        vrf_id: 42
      - name: IT
        vrf_id: 100

---
# Testing cv-pathfinder
wan_mode: cv-pathfinder

bgp_as: 65000

cv_pathfinder_regions:
  - name: AVD_Land_West
    id: 42
    description: AVD Region
    sites:
      - name: Site422
        id: 422
  - name: AVD_Land_East
    id: 43
    description: AVD Region
    sites:
      - name: Site511
        id: 511

bgp_peer_groups:
  wan_overlay_peers:
    password: "htm4AZe9mIQOO1uiMuGgYQ=="
    listen_range_prefixes:
      - 192.168.42.0/24
      - 192.168.43.0/24

wan_route_servers:
  # Not testing the overloading
  - hostname: cv-pathfinder-pathfinder

wan_ipsec_profiles:
  control_plane:
    shared_key: ABCDEF1234567890
  data_plane:
    shared_key: ABCDEF1234567890666

default_node_types:
  - node_type: wan_rr
    match_hostnames:
      - "cv-pathfinder-pathfinder.*"
  - node_type: wan_transit
    match_hostnames:
      - "cv-pathfinder-transit"
  - node_type: wan_edge
    match_hostnames:
      - "cv-pathfinder-edge"

wan_edge:
  defaults:
    loopback_ipv4_pool: 192.168.42.0/24
  nodes:
    - name: cv-pathfinder-edge
      cv_pathfinder_region: AVD_Land_East
      cv_pathfinder_site: Site511
      id: 1

wan_transit:
  defaults:
    loopback_ipv4_pool: 192.168.43.0/24
  nodes:
    - name: cv-pathfinder-transit
      cv_pathfinder_region: AVD_Land_West
      cv_pathfinder_site: Site422
      id: 1

wan_rr:
  defaults:
    loopback_ipv4_pool: 192.168.44.0/24
  nodes:
    - name: cv-pathfinder-pathfinder
      id: 1
    - name: cv-pathfinder-pathfinder1
      id: 2
    - name: cv-pathfinder-pathfinder2
      id: 3

wan_path_groups:
  - name: MPLS
    ipsec: false
    # TODO remove one once auto-id is implemented - for now required in schema
    id: 100
  - name: INET
    id: 101
  - name: LTE
    id: 102

wan_carriers:
  - name: Comcast
    path_group: INET
  - name: ATT
    path_group: INET
  - name: Bouygues Telecom
    path_group: INET
  - name: SFR
    path_group: INET
  - name: Orange
    path_group: INET
  - name: Colt
    path_group: MPLS

l3_edge:
  l3_interfaces:
    - node: cv-pathfinder-edge
      interface: Ethernet1
      wan_carrier: ATT
      wan_circuit_id: 666
      ip: dhcp
    - node: cv-pathfinder-edge
      interface: Ethernet2
      wan_carrier: Colt
      wan_circuit_id: 10555
      ip: 172.15.5.5/31
      cv_pathfinder_connected_to_pathfinder: False
    - node: cv-pathfinder-transit
      interface: Ethernet1
      wan_carrier: Comcast
      wan_circuit_id: 667
      ip: dhcp
    - node: cv-pathfinder-transit
      interface: Ethernet2
      wan_carrier: Colt
      wan_circuit_id: 10666
      ip: 172.16.6.6/31
    - node: cv-pathfinder-pathfinder
      interface: Ethernet1
      wan_carrier: Bouygues Telecom
      wan_circuit_id: 777
      ip: 10.7.7.7/31
    - node: cv-pathfinder-pathfinder
      interface: Ethernet2
      wan_carrier: Colt
      wan_circuit_id: 10000
      ip: 172.16.0.1/31
    - node: cv-pathfinder-pathfinder1
      interface: Ethernet1
      wan_carrier: Orange
      wan_circuit_id: 888
      ip: 10.8.8.8/31
    - node: cv-pathfinder-pathfinder2
      interface: Ethernet1
      wan_carrier: SFR
      wan_circuit_id: 999
      ip: 10.9.9.9/31

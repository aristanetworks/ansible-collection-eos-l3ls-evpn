---
# Minimum config to only test the specific feature.
type: spine
spine:
  defaults:
    loopback_ipv4_pool: 10.42.0.0/24
    bgp_as: 42
    vtep_loopback_ipv4_pool: 10.43.0.0/24
  nodes:
    - name: failure-p2p-links-subinterfaces-with-port-channel
      id: 1

l3_edge:
  p2p_links:
    - nodes: [failure-p2p-links-subinterfaces-with-port-channel, peer1]
      id: 1
      subinterfaces:
        - vrf: TEST
      port_channel:
        nodes_child_interfaces:
          - node: failure-p2p-links-subinterfaces-with-port-channel
            interfaces: [Ethernet1]
          - node: peer1
            interfaces: [Ethernet1]

expected_error_message: >-
  Cannot set both 'subinterfaces' and 'port_channel' for l3_edge. Check the configuration for nodes ['failure-p2p-links-subinterfaces-with-port-channel', 'peer1']

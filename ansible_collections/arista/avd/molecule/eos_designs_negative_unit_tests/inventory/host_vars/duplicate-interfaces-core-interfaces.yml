---
# Minimum config to only test the specific feature.
l3leaf:
  defaults:
    loopback_ipv4_pool: 10.42.0.0/24
    bgp_as: 42
    vtep_loopback_ipv4_pool: 10.43.0.0/24
  nodes:
    - name: duplicate-interfaces-core-interfaces
      id: 42

type: l3leaf

core_interfaces:
  p2p_links_profiles:
    - name: isis_bb_profile
      speed: "forced 1000full"
      mtu: 1500
      isis_hello_padding: false
      isis_metric: 60
      ip_pool: underlay_pool
      isis_circuit_type: level-2
      ipv6_enable: true
      isis_authentication_mode: md5
      isis_authentication_key: $1c$sTNAlR6rKSw=

  p2p_links:
    - nodes: [ duplicate-interfaces-core-interfaces, peer1]
      id: 1
      interfaces: [ Ethernet1, Ethernet2 ]
      profile: isis_bb_profile
      as: [65000, 65002]
      ip: [192.168.0.2/31, 192.168.0.3/31]

    # Link w/o bb profile
    - nodes: [ duplicate-interfaces-core-interfaces, peer2]
      id: 2
      interfaces: [ Ethernet1, Ethernet3 ]
      as: [65000, 65002]
      ip: [192.168.0.2/31, 192.168.0.3/31]

expected_error_message: >-
  Found duplicate objects with conflicting data while generating configuration for Neighbors. {'ip_address': '192.168.0.3',
  'peer_group': 'IPv4-UNDERLAY-PEERS', 'remote_as': '65002', 'local_as': '65000', 'peer': 'peer2', 'description': 'peer2'}
  conflicts with {'ip_address': '192.168.0.3', 'peer_group': 'IPv4-UNDERLAY-PEERS', 'remote_as': '65002', 'local_as': '65000',
  'peer': 'peer1', 'description': 'peer1'}.
